import{u as g,p,q as h,R as j,j as s,B as f,L as F}from"./index-kQRWps4l.js";import{u as b,F as w,a as c,b as m,c as l,d,e as x,s as P,z as t,A as R}from"./zod-BdhU9oaw.js";import{I as u}from"./input-k996K8_g.js";import"./card-BDzFdGdv.js";function E(){const e=g(),n=p(),o=h.useMutation("post","/auth/register",{onSuccess(r){n.login(r.accessToken),e(j.HOME)}}),i=r=>{o.mutate({body:r})},a=o.isError?o.error.message:void 0;return{register:i,isPending:o.isPending,errorMessage:a}}const M=t.object({email:t.string({required_error:"Email обязателен"}).email("Неверный email"),password:t.string({required_error:"Пароль обязателен"}).min(6,"Пароль должен быть не менее 6 символов"),confirmPassword:t.string().optional()}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Пароли не совпадают"});function S(){const e=b({resolver:P(M)}),{errorMessage:n,isPending:o,register:i}=E(),a=e.handleSubmit(i);return s.jsx(w,{...e,children:s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:a,children:[s.jsx(c,{control:e.control,name:"email",render:({field:r})=>s.jsxs(m,{children:[s.jsx(l,{children:"Email"}),s.jsx(d,{children:s.jsx(u,{placeholder:"admin@gmail.com",...r})}),s.jsx(x,{})]})}),s.jsx(c,{control:e.control,name:"password",render:({field:r})=>s.jsxs(m,{children:[s.jsx(l,{children:"Пароль"}),s.jsx(d,{children:s.jsx(u,{placeholder:"******",type:"password",...r})}),s.jsx(x,{})]})}),s.jsx(c,{control:e.control,name:"confirmPassword",render:({field:r})=>s.jsxs(m,{children:[s.jsx(l,{children:"Подтвердите пароль"}),s.jsx(d,{children:s.jsx(u,{type:"password",...r})}),s.jsx(x,{})]})}),n&&s.jsx("p",{className:"text-destructive text-sm",children:n}),s.jsx(f,{disabled:o,type:"submit",children:"Зарегистрироваться"})]})})}function v(){return s.jsx(R,{title:"Регистрация",description:"Введите ваш email и пароль для регистрации в системе",form:s.jsx(S,{}),footerText:s.jsxs(s.Fragment,{children:["Уже есть аккаунт? ",s.jsx(F,{to:j.LOGIN,children:"Войти"})]})})}const N=v;export{N as Component};
